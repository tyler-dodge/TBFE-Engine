#include "StatBar.h"
StatBar::StatBar(int x,int y,string newSpecial):Element_Base(x,y)
{
  Special=newSpecial;
  StatBarSurface=LoadImage("Images/UI/StatBar.png");
  StatBarBack=LoadImage("Images/UI/StatBarBack.png");
  if (StatBarSurface!=NULL)
    {
      Dimensions.X=StatBarSurface->w;
      Dimensions.Y=StatBarSurface->h;
    }
  else
    {
      Dimensions.X=0;
      Dimensions.Y=0;
    };
  if (Special!="")
    {
      if (Special.find('(')!=string::npos)
	{
	  NextSet(&Special,'(');
	  Dimensions.X=atoi(NextSet(&Special,')').c_str());
	};
    };
  BarDimensions.x=0;
  BarDimensions.y=0;
  BarDimensions.w=Dimensions.X;
  BarDimensions.h=Dimensions.Y;
};
void StatBar::Reload()
{
};
StatBar::~StatBar()
{
  SDL_FreeSurface(StatBarSurface);
  SDL_FreeSurface(StatBarBack);
};
void StatBar::RenderElement(SDL_Surface * screen, Position ScreenPosition)
{
  Percentage=(float)atoi(Special.c_str());
  ApplyImage(ScreenPosition.X+CurrentPosition.X,ScreenPosition.Y+CurrentPosition.Y,StatBarBack,screen,&BarDimensions);
  Bar.x=0;
  Bar.y=0;
  Bar.w=Percentage/100*BarDimensions.w;
  Bar.h=15;
  ApplyImage(ScreenPosition.X+CurrentPosition.X,ScreenPosition.Y+CurrentPosition.Y+1,StatBarSurface,screen,&Bar);
};
